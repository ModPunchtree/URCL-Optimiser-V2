BITS 16
MINREG 25
MINHEAP 8
MINSTACK 4088
IMM SP 4095
STR M7 0
STR M6 'r'
STR M5 'a'
STR M4 'b'
STR M3 ' '
STR M2 'o'
STR M1 'o'
STR M0 'f'
IMM R1 5
HCAL .malloc_FUNCSTART
MOV R4 R1
LSTR R4 4 0
LSTR R4 3 't'
LSTR R4 2 's'
LSTR R4 1 'e'
LSTR R4 0 't'
HLT
.malloc_FUNCSTART
MOV R2 SP
MOV R3 R1
BLE ~+11 R2 SP
LOD R4 R2
BNZ ~+5 R4
MOV R3 R1
DEC R2 R2
BRG ~-4 R2 SP
JMP ~+5
DEC R3 R3
DEC R2 R2
BRZ ~+2 R3
BRG ~-9 R2 SP
SUB R2 R2 R3
BRG ~+2 R2 SP
MOV SP R2
ADD R4 R2 R1
BGE ~+4 R2 R4
INC R2 R2
STR R2 65535
BRL ~-2 R2 R4
SUB R1 4095 R2
ADD R1 R1 M8
HRET