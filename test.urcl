@DEFINE collatz R1
@DEFINE count R2

IMM collatz 9   // collatz value
IMM count 0     // number of steps to reach 1
.loop
    BRE .end collatz 1
    BOD .x3plus1 collatz
    .div2
    DIV collatz collatz 2
    INC count count
    JMP .loop
    .x3plus1
    MLT collatz collatz 3
    INC collatz collatz
    INC count count
    JMP .loop
.end
OUT %NUMB R2
HLT